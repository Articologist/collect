{% extends 'base.html.twig' %}

{% block body %}

    <div class="app">
        {% set route = app.request.get('_route') %}
        <div class="sidebar-wrapper nicescroll">
            <div class="nav-wrapper">
                <div class="header-logo">
                    <a href="{{ path('app_homepage') }}">
                        <img class='logo' src="{{ preload(asset('../build/images/logo.svg')) }}" aria-label="Logo" height="45" width="45">
                        <span>Koillection</span>
                    </a>
                </div>
                <ul class="nav nav-sidebar">
                    {% include 'Nav/' ~ context ~ '.html.twig' %}
                </ul>
            </div>

            <div class="nav-wrapper">
                <ul class="nav nav-sidebar nav-bottom">
                    <li class="collapse-nav"><a href=""><i class="fa fa-angle-double-right fa-fw"></i><span>{{ 'menu.collapse'|trans }}</span></a></li>
                    <li class="close-nav"><a href=""><i class="fa fa-times fa-fw"></i><span>{{ 'menu.close'|trans }}</span></a></li>
                </ul>
            </div>
        </div>



        <div class="main content-wrapper">
            <div class="mobile-overlay"></div>
            <header class="expanded">
                <div class="row breadcrumb">
                    <div class="burger-menu">
                        <i class="fa fa-bars fa-fw"></i>
                    </div>
                    {% block breadcrumb %}{% endblock %}
                </div>


                <div class="header-profile">
                    {% if app.user.avatar != null %}
                        <img class="user-avatar" src="{{ preload(asset(app.user.avatar.path)) }}">
                    {% else %}
                        <span class="user-avatar circle avatar">{{ app.user.username|first|upper }}</span>
                    {% endif %}
                </div>
            </header>
            <div class="container-fluid container-limited">
                {% block content %}{% endblock %}
            </div>
        </div>
    </div>
{% endblock %}

{% block javascripts %}
    {{ parent() }}
    {% for flash_message in app.session.flashbag.get('notice') %}
        <script nonce="{{ csp_nonce() }}">Materialize.toast("{{ flash_message|safeContent }}", 5000)</script>
    {% endfor %}
{% endblock %}
