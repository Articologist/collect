function fetchAndEmit(t){return clients.matchAll({type:"window"}).then(function(e){return e.forEach(postMessage(LOADING)),fetch(t).then(function(t){return 0===t.status?e.forEach(postMessage(FAILED)):e.forEach(postMessage(LOADED)),t})["catch"](function(t){return e.forEach(postMessage(FAILED)),new Response(null,{status:204})})})}function postMessage(t){return function(e){e.postMessage(t)}}const LOADING=0,LOADED=1,FAILED=2;this.addEventListener("fetch",function(t){"navigate"===t.request.mode?t.respondWith(fetchAndEmit(t.request)):t.respondWith(fetch(t.request))});